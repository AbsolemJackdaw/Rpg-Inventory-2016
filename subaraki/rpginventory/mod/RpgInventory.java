package subaraki.rpginventory.mod;

import java.util.Arrays;

import net.minecraftforge.common.MinecraftForge;
import net.minecraftforge.fml.common.FMLCommonHandler;
import net.minecraftforge.fml.common.Mod;
import net.minecraftforge.fml.common.Mod.EventHandler;
import net.minecraftforge.fml.common.ModMetadata;
import net.minecraftforge.fml.common.SidedProxy;
import net.minecraftforge.fml.common.event.FMLInitializationEvent;
import net.minecraftforge.fml.common.event.FMLPostInitializationEvent;
import net.minecraftforge.fml.common.event.FMLPreInitializationEvent;
import net.minecraftforge.fml.common.network.NetworkRegistry;
import subaraki.rpginventory.gui.handler.GuiHandler;
import subaraki.rpginventory.item.RpgItems;
import subaraki.rpginventory.mod.hooks.EventHooks;
import subaraki.rpginventory.mod.network.PacketHandler;
import subaraki.rpginventory.mod.server.ServerProxy;

@Mod(modid = RpgInventory.MODID, name = RpgInventory.NAME, version = RpgInventory.VERSION)
public class RpgInventory {

	public static final String MODID = "rpginventorymod";
	public static final String NAME = "Rpg Inventory";
	public static final String VERSION = "1.10.2 v1";

	@SidedProxy(clientSide = 
			"subaraki.rpginventory.mod.client.ClientProxy",
			serverSide = 
			"subaraki.rpginventory.mod.server.ServerProxy")
	public static ServerProxy proxy;

	public static RpgInventory INSTANCE;

	@EventHandler 
	public void preInit(FMLPreInitializationEvent event) {

		INSTANCE = this;

		ModMetadata modMeta = event.getModMetadata();
		modMeta.authorList = Arrays.asList(new String[] { "Subaraki" });
		modMeta.autogenerated = false;
		modMeta.credits = "ZetaHunter and Richard Digits (retired team members), Resinesin and Take Weiland for ultra-testing, hints and tips";
		modMeta.description = "Expanded Inventory, Class Armor, and Ultra Fine 3D weapons !";
		modMeta.url = "http://www.minecraftforum.net/forums/mapping-and-modding/minecraft-mods/1287896-/";

		//inititate networking
		new PacketHandler();

		//always register items in preInit
		RpgItems.init();
		RpgItems.register();
		proxy.registerRenders();
		
		NetworkRegistry.INSTANCE.registerGuiHandler(this, new GuiHandler());
		
		MinecraftForge.EVENT_BUS.register(new EventHooks());
		FMLCommonHandler.instance().bus().register(new EventHooks());
	}

	@EventHandler
	public void init(FMLInitializationEvent event){
		//register colors after preInit
		proxy.registerColors();
	}

	@EventHandler
	public void postInit(FMLPostInitializationEvent event){

	}
}
